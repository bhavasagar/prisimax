{% extends "base.html" %}
{%load static%}
{% block extra_head %}
<meta name="viewport" content="width=device-width, initial-scale=0.46, shrink-to-fit=no">
{% endblock extra_head%}
{% block content %}
<main>
<link href="https://fonts.googleapis.com/css2?family=Fondamento&display=swap" rel="stylesheet"> 
<style>
.img-responsive{
min-height:360px;
width: 100% !important;
height: auto;
object-fit: scale-down !important;
}
.mycard{
width:auto;
height:520px !important;
} 
.caption
{
text-align:center;
color:#373c3d;
opacity:0.8;
font-weight:1000;
font-family: 'Fondamento', cursive;
margin-top:3px;
}
.cat{
width:100px;
height:100px;
border-radius:50% !important;
}
.scrolling-wrapper{
	overflow-x: auto;
   margin-top:-30px;
   padding:10px;
}
 .colx > .caption
{
color:#373c3d !important;
text-transform: capitalize !important;
opacity:1;
font-weight:1000;
font-family: 'Fondamento', cursive;
}
@media only screen and (max-width: 1000px) {

  .page-link{
      font-weight:1000;
      font-size:3em !important;
  }

  body{
  background-color:#f0f0f0 !important;
  }
  .img-responsive{
object-fit: scale-down !important;
}
 .colx > .caption
{
text-align:center !important;
margin-left:-2px;
color:#373c3d;
text-transform: capitalize !important;
opacity:1;
font-weight:1000;
font-family: 'Fondamento', cursive;
font-size:0.765em !important;
margin-top:3px;
}
.c1{
  width:120px;
  height:120px;
  color:#f0f;
  background-color: #000 !important;
  transition: all 0.2s ease-in-out !important;
  text-align: center;
  margin-right:-15px !important;
  }
  
.cat{
width:79px;
height:79px;
border-radius:50% !important;
margin-left:-15px !important;
}
}
.gradient_line{ 
    margin: 0 0 50px 0;
    display: block;
    border: none;
    height: 1px;
    background: #0071B9;
    background: linear-gradient(to right, white, #0071B9, #26ABFF, #0071B9, white);
}
</style>
      
  <div class="container-fluid">
  <nav class="navbar" style="background-color:#8dbbe0;border-radius:10px;margin-bottom:-35px">
      <form action="." method="POST" class="form-inline" size="50" style="display: flex;justify-content: space-between;"  >
          {% csrf_token %}
          
        <input class="form-control" style="display:inline-block;background-color:#d7eafa;" name="search" type="search" placeholder="Search" aria-label="Search">
      </form>
    <!-- Button trigger modal -->
<button type="button" class="btn-sm btn" style="position:absolute;left:73%;font-size:1em;color:#fff" data-toggle="modal" data-target="#fullHeightModalRight">
  <i class="fas fa-filter mr-3"></i>Filters
</button>
<form action="." method="POST" >
{% csrf_token %}
<!-- Full Height Modal Right -->
<div class="modal fade right" id="fullHeightModalRight" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
  aria-hidden="true">

  <div class="modal-dialog modal-full-height modal-right" role="document">

    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title w-100" id="myModalLabel" >Filters</h4>
        <button type="button" style="opacity:0" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" style="padding-left:10px">
       <div class="d-flex my-4 p-3 card">
        <h5 class="ml-1">Sort</h5>
        <div class="custom-control custom-checkbox">
            <input type="checkbox" class="custom-control-input " name="lth" id="lth">
            <label class="custom-control-label" style="margin-left:0px" for="lth">Price Low to High</label>
        </div>
        <div class="custom-control custom-checkbox">
            <input type="checkbox" class="custom-control-input " name="htl" id="htl">
            <label class="custom-control-label" style="margin-left:0px" for="htl">Price High to Low</label>
        </div>
      </div>
      <div class="d-flex justify-content-center my-4 p-3 card">
        <h5 class="ml-1">Price</h5>
        <div class="row">
        <div class="col mr-1">
        <h6 class="ml-2">Min Price</h6>
        <div class="w-60">
          <br><input type="range" name="min_price" class="custom-range mt-3" id="customRange11" min="30" max="90000">
        </div>
        <span class="font-weight-bold valueSpan2 " style="position:absolute;top:27%;left:70%;"></span>
      </div>
      <div class="col">
      <h6 class="ml-2">Max Price</h6>
      <br><input type="range" name="max_price" class="custom-range mt-3" id="customRange10" min="30" max="90000">
        </div>
        <span class="font-weight-bold valueSpan" style="position:absolute;top:50%;left:80%;right:0"></span>
      </div>
      </div>
      <div class="d-flex justify-content-center my-4 p-3 card">
        <h5 class="ml-1">Discount Percent</h5>
        <div class="row">
        <div class="col mr-1">
        <h6 class="ml-2">Min Percent</h6>
        <div class="w-60">
          <br><input type="range" name="min_dis_price" class="custom-range mt-3" id="customRange12" min="0" max="100">
        </div>
        <span class="font-weight-bold valueSpan3 " style="position:absolute;top:27%;left:70%;"></span>
        </div>
        <div class="col">
        <h6 class="ml-2">Max Percent</h6>
        <div class="w-60">
          <br><input type="range" name="max_dis_price" class="custom-range mt-3" id="customRange14" min="0" max="100">
        </div>
        <span class="font-weight-bold valueSpan5" style="position:absolute;top:27%;left:70%;"></span>
        </div>
        </div>

      </div>
      <div class="d-flex my-4 p-3 card">
        <h5 class="ml-1">Types</h5>
        <div class="custom-control custom-checkbox">
            <input type="checkbox" class="custom-control-input " name="new" id="new">
            <label class="custom-control-label" style="margin-left:0px" for="new">New</label>
        </div>
        <div class="custom-control custom-checkbox">
            <input type="checkbox" class="custom-control-input " name="bestseller" id="bestseller">
            <label class="custom-control-label" style="margin-left:0px" for="bestseller">Bestseller</label>
        </div>
      </div>
      </div>
      <div class="modal-footer justify-content-center">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary">Apply Filters</button>
      </div>
    </div>
  </div>
</div>
</form>
    </nav>
    <h5 class="mt-5 ml-2 center" style="margin-top:-30px;margin-bottom:-25px;font-weight:600;font-size:1.5em;font-family: 'Roboto Slab', serif;">Categories</h5>
    <div style="margin-top:-30px;margin-left:2px;" class="scrolling-wrapper row flex-row flex-nowrap mt-4 pb-4">
			<a href="/ecommerce/" >
			<div class="col colx">
				<img class="card card-block cat" src="https://www.presimax.online/media/images/PicsArt_07-09-10.36.46.jpg">
        <p class="caption">All</p>
			</div>
      </a>
      {% for catg in cat %}
      <a href="{{ catg.get_absolute_url }}" >
			<div class="col colx">
				<img class="card card-block cat" src="{{ catg.image.url }}">
        <p class="caption" style="text-transform: capitalize">{{ catg.name }}</p>
			</div>
      </a>
      {% endfor %}
    </div>
    
</div>
<hr style="margin-top:-30px" class="gradient_line" />
<center>
<h5 class="mt-5 center mb-2" style="margin-top:-10px;font-weight:700;font-size:2em;font-family: 'Roboto Slab', serif;">{{ object_list.0.get_sale_name_display }}</h5>
</center>
<div class="custom-control custom-switch mb-1" style="position:absolute;right:25px;margin-top:-3%">
  <div class="btn-group btn-toggle mt-1 mb-1"> 
    <input onclick="window.location.href='/ecommerce/';" class="custom-control-input p-1 font-weight-bolder" type="checkbox" id="customSwitches" checked>
    <label class="custom-control-label" for="customSwitches">More</label>
  </div>
</div>

      <!--Section: Products v.3-->
      <section class="text-center mb-4 p-3" style="margin-top:15px">

        <div class="row wow fadeIn">

          {% for item in object_list %}
          <div class="col-lg-3 col-md-6 mb-4">

            <div class="card mycard rounded">

              <div class="view overlay" style="padding:2px">
                <img  src="{{ item.item.image.url }}" class="card-img-top img-responsive rounded">
                <a href="{{ item.item.get_absolute_url }}">
                  <div class="mask rgba-white-slight"></div>
                </a>
              </div>

              <div class="card-body text-center">
                <a href="" class="grey-text">
                  <h5>{{ item.item.get_category_display }}</h5>
                </a>
                <h5>
                  <strong>
                    <a href="{{ item.item.get_absolute_url }}" class="dark-grey-text">{{ item.item.title|truncatechars:10 }}
                      <span class="badge badge-pill {{ item.item.get_label_display }}-color">{{item.tag}}</span>
                    </a>
                  </strong>
                </h5>

                <h4 class="font-weight-bold blue-text">
                  <strong>
                  {% if item.item.discount_price %}
                  <del>Rs. {{ item.item.price }}</del><br>
                  <i class="fas fa-crown" style="color:#eec64f;">Rs. {{ item.item.club_discount_price }}</i><br>
                  Rs. {{ item.item.discount_price }}
                  <span class="badge badge-pill danger-color">{{item.item.dis_per}}% off</span>
                  {% else %}
                  {{ item.item.price }}
                  {% endif %}
                  </strong>
                </h4>

              </div>

            </div>

          </div>
          {% endfor %}
        </div>

      </section>
      <!--Section: Products v.3-->
       
      <center>

      <nav class="d-flex justify-content-center wow fadeIn">
        <ul class="pagination pg-blue">

          {% if object_list.has_previous %}
          <li class="page-item">
            <a class="page-link font-weight-bold" href="?page={{ object_list.previous_page_number }}" aria-label="Previous">
              <span aria-hidden="true">&laquo;</span>
              <span class="sr-only">Previous</span>
            </a>
          </li>
          {% endif %}

          <li class="page-item active">
            <a class="page-link font-weight-bold" href="?page={{ object_list.number }}">{{ object_list.number }}
              <span class="sr-only">(current)</span>
            </a>
          </li>

          {% if object_list.has_next %}
          <li class="page-item">
            <a class="page-link font-weight-bold" href="?page={{ object_list.next_page_number }}" aria-label="Next">
              <span aria-hidden="true">&raquo;</span>
              <span class="sr-only">Next</span>
            </a>
          </li>
          {% endif %}
        </ul>
      </nav>
</div>
  </main>

{% endblock content %}
{% block extra_scripts %}
<script>
      $(document).ready(function() {

  const $valueSpan = $('.valueSpan2');
  const $value = $('#customRange11');
  $valueSpan.html($value.val());
  $value.on('input change', () => {

    $valueSpan.html($value.val());
  });
});
$(document).ready(function() {

  const $valueSpan = $('.valueSpan3');
  const $value = $('#customRange12');
  $valueSpan.html($value.val()+"%");
  $value.on('input change', () => {

    $valueSpan.html($value.val()+"%");
  });
});
$(document).ready(function() {

  const $valueSpan = $('.valueSpan5');
  const $value = $('#customRange14');
  $valueSpan.html($value.val()+"%");
  $value.on('input change', () => {

    $valueSpan.html($value.val()+"%");
  });
});
$(document).ready(function() {

  const $valueSpan = $('.valueSpan');
  const $value = $('#customRange10');
  $valueSpan.html($value.val());
  $value.on('input change', () => {

    $valueSpan.html($value.val());
  });
});
    </script>
{% endblock extra_scripts %}