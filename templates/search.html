{% extends "base.html" %}
{%load static%}
{% block extra_head %}
<meta name="viewport" content="width=device-width, initial-scale=0.4, shrink-to-fit=no">
{% endblock extra_head%}
{% block content %}
  <main>
  <link href="https://fonts.googleapis.com/css2?family=Fondamento&display=swap" rel="stylesheet"> 
<style>
.img-responsive{
min-height:360px;
width: 100% !important;
height: auto;
object-fit: scale-down !important;
}
.mycard{
width:auto;
height:520px !important;
} 
@media only screen and (max-width: 1000px) {

  body{
  background-color:#f0f0f0 !important;
  }
  
  .card-block{
  transition: all 0.2s ease-in-out !important;
  text-align: center;
  object-fit: fill !important;
  }
  
.img-responsive{
object-fit: scale-down !important;
}
}
</style>
    <div class="container">
      <nav class="navbar" style="background-color:#8dbbe0;border-radius:10px;margin-bottom:-35px">
      <form action="." method="POST" class="form-inline" size="50" style="display: flex;justify-content: space-between;"  >
          {% csrf_token %}
          
        <input class="form-control" style="display:inline-block;background-color:#d7eafa;" name="search" type="search" placeholder="Search" aria-label="Search">
      </form>
    <!-- Button trigger modal -->
<button type="button" class="btn-sm btn" style="position:absolute;left:73%;font-size:1em;color:#fff" data-toggle="modal" data-target="#fullHeightModalRight">
  <i class="fas fa-filter mr-3"></i>Filters
</button>
<form action="." method="POST" >
{% csrf_token %}
<!-- Full Height Modal Right -->
<div class="modal fade right" id="fullHeightModalRight" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
  aria-hidden="true">

  <div class="modal-dialog modal-full-height modal-right" role="document">

    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title w-100" id="myModalLabel" >Filters</h4>
        <button type="button" style="opacity:0" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" style="padding-left:10px">
      <div class="d-flex justify-content-center my-4 p-3 card">
        <h5 class="ml-1">Price</h5>
        <div class="row">
        <div class="col mr-1">
        <h6 class="ml-2">Min Price</h6>
        <div class="w-60">
          <br><input type="range" name="min_price" class="custom-range mt-3" id="customRange11" min="30" max="90000">
        </div>
        <span class="font-weight-bold valueSpan2 " style="position:absolute;top:27%;left:70%;"></span>
      </div>
      <div class="col">
      <h6 class="ml-2">Max Price</h6>
      <br><input type="range" name="max_price" class="custom-range mt-3" id="customRange10" min="30" max="90000">
        </div>
        <span class="font-weight-bold valueSpan" style="position:absolute;top:50%;left:80%;right:0"></span>
      </div>
      </div>
      <div class="d-flex justify-content-center my-4 p-3 card">
        <h5 class="ml-1">Discount Percent</h5>
        <div class="row">
        <div class="col mr-1">
        <h6 class="ml-2">Min Percent</h6>
        <div class="w-60">
          <br><input type="range" name="min_dis_price" class="custom-range mt-3" id="customRange12" min="0" max="100">
        </div>
        <span class="font-weight-bold valueSpan3 " style="position:absolute;top:27%;left:70%;"></span>
        </div>
        <div class="col">
        <h6 class="ml-2">Max Percent</h6>
        <div class="w-60">
          <br><input type="range" name="max_dis_price" class="custom-range mt-3" id="customRange14" min="0" max="100">
        </div>
        <span class="font-weight-bold valueSpan5" style="position:absolute;top:27%;left:70%;"></span>
        </div>
        </div>

      </div>
      <div class="d-flex my-4 p-3 card">
        <h5 class="ml-1">Types</h5>
        <div class="custom-control custom-checkbox">
            <input type="checkbox" class="custom-control-input " name="new" id="new">
            <label class="custom-control-label" style="margin-left:0px" for="new">New</label>
        </div>
        <div class="custom-control custom-checkbox">
            <input type="checkbox" class="custom-control-input " name="bestseller" id="bestseller">
            <label class="custom-control-label" style="margin-left:0px" for="bestseller">Bestseller</label>
        </div>
      </div>
      </div>
      <div class="modal-footer justify-content-center">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary">Apply Filters</button>
      </div>
    </div>
  </div>
</div>
</form>
    </nav>
      
       <!--Section: Products v.3-->
       <h5 class="ml-1">{{ type }}</h5>
      <section class="text-center mb-4" style="margin-top:15px">
       
        <div class="row wow fadeIn">

          {% for item in sobs %}
          <div class="col-lg-3 col-md-6 mb-4">

            <div class="card mycard rounded">

              <div class="view overlay" style="padding:2px">
                <img src="{{ item.image.url }}" class="card-img-top img-responsive rounded">
                <a href="{{ item.get_absolute_url }}">
                  <div class="mask rgba-white-slight"></div>
                </a>
              </div>
              <div class="card-body text-center">
                <a href="" class="grey-text">
                  <h5>{{ item.get_category_display }}</h5>
                </a>
                <h5>
                  <strong>
                    <a href="{{ item.get_absolute_url }}" class="dark-grey-text">{{ item.title|truncatechars:10 }}
                      <span class="badge badge-pill {{ item.get_label_display }}-color">{{item.tag}}</span>
                    </a>
                  </strong>
                </h5>

                <h4 class="font-weight-bold blue-text">
                  <strong>
                  {% if item.discount_price %}
                  <del>Rs. {{ item.price }}</del><br>
                  <i class="fas fa-crown" style="color:#eec64f;">Rs. {{ item.club_discount_price }}</i><br>
                  Rs. {{ item.discount_price }}
                  <span class="badge badge-pill danger-color">{{item.dis_per}}% off</span>
                  {% else %}
                  {{ item.price }}
                  {% endif %}
                  </strong>
                </h4>

              </div>

            </div>

          </div>
          {% endfor %}
        </div>

      </section>
      <!--Section: Products v.3-->
      <center>

      <nav class="d-flex justify-content-center wow fadeIn">
        <ul class="pagination pg-blue">

          {% if sobs.has_previous %}
          <li class="page-item" >
            <a class="page-link font-weight-bold" href="?page={{ sobs.previous_page_number }}" aria-label="Previous">
              <span aria-hidden="true">&laquo;</span>
              <span class="sr-only">Previous</span>
            </a>
          </li>
          {% endif %}

          <li class="page-item active" >
            <a class="page-link font-weight-bold" href="?page={{ sobs.number }}">{{ sobs.number }}
              <span class="sr-only">(current)</span>
            </a>
          </li>

          {% if sobs.has_next %}
          <li class="page-item" >
            <a class="page-link font-weight-bold" href="?page={{ sobs.next_page_number }}" aria-label="Next">
              <span aria-hidden="true">&raquo;</span>
              <span class="sr-only">Next</span>
            </a>
          </li>
          {% endif %}
        </ul>
      </nav>
    </div>
  </main>

{% endblock content %}
{% block extra_scripts %}
<script>
      $(document).ready(function() {

  const $valueSpan = $('.valueSpan2');
  const $value = $('#customRange11');
  $valueSpan.html($value.val());
  $value.on('input change', () => {

    $valueSpan.html($value.val());
  });
});
$(document).ready(function() {

  const $valueSpan = $('.valueSpan3');
  const $value = $('#customRange12');
  $valueSpan.html($value.val()+"%");
  $value.on('input change', () => {

    $valueSpan.html($value.val()+"%");
  });
});
$(document).ready(function() {

  const $valueSpan = $('.valueSpan5');
  const $value = $('#customRange14');
  $valueSpan.html($value.val()+"%");
  $value.on('input change', () => {

    $valueSpan.html($value.val()+"%");
  });
});
$(document).ready(function() {

  const $valueSpan = $('.valueSpan');
  const $value = $('#customRange10');
  $valueSpan.html($value.val());
  $value.on('input change', () => {

    $valueSpan.html($value.val());
  });
});
    </script>
{% endblock extra_scripts %}